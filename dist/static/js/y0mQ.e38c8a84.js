(window.webpackJsonp=window.webpackJsonp||[]).push([["y0mQ"],{y0mQ:function(e,t,a){"use strict";a.r(t);var r=a("cLjf"),n=a.n(r),i=a("hDQ3"),l=a.n(i),s=a("t3Un");var o=a("qpgI"),u={0:"全部",1:"设置服务套餐",2:"设置设备参数",3:"解绑设备"},p={data:function(){return{queryParams:{type:"",equipmentValue:"",lyyDistributorId:""},list:[],merchantList:[],colums:[{key:"typeText",label:"操作类型"},{key:"equipmentTypeNameText",label:"操作设备"},{key:"distributorNameText",label:"操作商家"},{key:"created",label:"操作时间"},{key:"createdby",label:"操作人"}],pageInfo:{total:0,pageSize:10,currPage:1},equipmentTypesArr:u}},created:function(){this.queryList(),this.getMerchantList()},methods:{queryList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.list=[],this.pageInfo.currPage=t;var a,r=this.queryParams;r.pageSize=this.pageInfo.pageSize,r.pageIndex=this.pageInfo.currPage,0===this.queryParams.type&&(r.type=""),(a=r,Object(s.a)({url:"/rest/operatelog/queryAgentOperateLog",method:"get",params:a})).then(function(t){if(e.listLoading=!1,t.data){var a=t.data.items||[];a=a.map(function(e){return e.typeText=u[e.type],e.equipmentTypeNameText=e.equipmentTypeName+"-"+e.equipmentValue,e.distributorNameText=e.distributorName+"="+e.distributorPhone,e}),e.list=a,e.pageInfo.total=t.data.total||0}else e.pageInfo.total=0})},handleSizeChange:function(e){this.pageInfo.pageSize=e,this.pageInfo.total=0,this.queryList(1)},handleCurrentChange:function(e){this.queryList(e)},filerQueryList:function(){this.pageInfo.total=0,this.queryList(this.pageInfo.currPage)},getMerchantList:function(){var e=this;return l()(n.a.mark(function t(){var a,r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(o.i)();case 2:0===(a=t.sent).result&&(r=(r=a.data||[]).map(function(e){return e.label=e.account+" "+e.name,e}),e.merchantList=r);case 4:case"end":return t.stop()}},t,e)}))()}}},c=a("ZrdR"),m=Object(c.a)(p,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-area"},[a("el-form",{staticStyle:{"margin-bottom":"20px"},attrs:{inline:!0,"label-width":"90px","label-position":"right"}},[a("el-form-item",{attrs:{label:"选择绑定商家"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择",filterable:""},model:{value:e.queryParams.lyyDistributorId,callback:function(t){e.$set(e.queryParams,"lyyDistributorId",t)},expression:"queryParams.lyyDistributorId"}},e._l(e.merchantList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.adOrgId}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"操作类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.queryParams.type,callback:function(t){e.$set(e.queryParams,"type",t)},expression:"queryParams.type"}},e._l(e.equipmentTypesArr,function(t,r){return a("el-option",{key:r,attrs:{label:t,value:r}},[e._v(e._s(t))])}))],1),e._v(" "),a("el-form-item",{attrs:{label:"设备编号"}},[a("el-input",{staticClass:"input-300",attrs:{placeholder:"输入设备编号",maxlength:"100",clearable:""},model:{value:e.queryParams.equipmentValue,callback:function(t){e.$set(e.queryParams,"equipmentValue",t)},expression:"queryParams.equipmentValue"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.filerQueryList}},[e._v("查询")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.list,border:"","highlight-current-row":""}},e._l(e.colums,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.key,label:e.label,width:e.width,sortable:e.sortable,align:"center"}})})),e._v(" "),a("el-pagination",{attrs:{"page-sizes":[10,20,30,40],"page-size":e.pageInfo.pageSize,total:e.pageInfo.total,"current-page":e.pageInfo.currPage,background:"",layout:"total, prev, pager, next, sizes, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},[],!1,null,null,null);m.options.__file="operationLog.vue";t.default=m.exports}}]);