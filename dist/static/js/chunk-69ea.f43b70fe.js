(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-69ea"],{B5LO:function(e,t,a){"use strict";a.d(t,"b",function(){return s}),a.d(t,"a",function(){return r});var n=a("Yfch"),s=function(e,t,a){if(t&&!Object(n.b)(t))return a(new Error("请输入正确的11位手机号码"));a()},r=function(e,t,a){if(t&&!/^[A-Za-z0-9]{6,16}$/.test(t))return a(new Error("请输入6-16位的数字或字母"));a()}},QsWH:function(e,t,a){"use strict";a.r(t);var n=a("B5LO"),s=a("xBhl"),r={data:function(){return{linkName:"",baseInfo:{agentUserName:"",linkName:"",phone:"",address:"",loginPhone:"",linkUserId:"",type:2},baseInfoRules:{agentUserName:[{required:!0,message:"请输入代理商名称",trigger:"blur"}],linkName:[{required:!0,message:"请输入联系人姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号码",trigger:"blur"},{validator:n.b,trigger:"blur"}],address:[{required:!0,message:"请输入联系地址",trigger:"change"}]}}},created:function(){var e=this.$route.query.ID;e&&this.getAngentDetail(e)},methods:{handleBaseInfo:function(){var e=this;this.baseInfo.linkUserId?this.$refs.baseInfoRef.validate(function(t){if(!t)return!1;e.handleAngentInfo()}):this.$message({message:"请先获取关联商家相关信息",type:"error"})},getAngentDetail:function(e){var t=this;Object(s.b)({agentUserId:e}).then(function(e){if(0===e.result){var a=e.data;for(var n in t.baseInfo)a[n]&&(t.baseInfo[n]=a[n]||"");t.getMerchant()}else t.$message({message:"获取代理商数据失败，请稍后再试",type:"error"})})},handleAngentInfo:function(){var e=this,t=this.baseInfo;t.agentUserId=this.$route.query.ID,Object(s.e)(t).then(function(t){0===t.result?(e.$message({message:"修改代理商信息成功",type:"success"}),e.$router.go(-1)):e.$message({message:"修改代理商信息失败",type:"error"})})},getMerchant:function(){var e=this;Object(s.d)({phone:this.baseInfo.loginPhone}).then(function(t){0===t.result&&t.data?(e.baseInfo.linkUserId=t.data.adUserId,e.linkName=t.data.name):e.$message({message:"数据查询失败，请稍后再试",type:"error"})})}}},l=a("KHd+"),o=Object(l.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-area"},[a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":"1",mode:"horizontal"}},[a("el-menu-item",{attrs:{index:"1"}},[e._v("基础信息")])],1),e._v(" "),a("el-form",{ref:"baseInfoRef",staticStyle:{"margin-top":"20px"},attrs:{model:e.baseInfo,rules:e.baseInfoRules,"label-width":"120px","label-position":"left"}},[a("el-form-item",{attrs:{label:"代理商名称",prop:"agentUserName"}},[a("el-input",{staticClass:"input-300",attrs:{placeholder:"请输入代理商名称",type:"text",maxlength:"64",clearable:""},model:{value:e.baseInfo.agentUserName,callback:function(t){e.$set(e.baseInfo,"agentUserName",t)},expression:"baseInfo.agentUserName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系人姓名",prop:"linkName"}},[a("el-input",{staticClass:"input-300",attrs:{placeholder:"请输入联系人姓名",type:"text",maxlength:"32",clearable:""},model:{value:e.baseInfo.linkName,callback:function(t){e.$set(e.baseInfo,"linkName",t)},expression:"baseInfo.linkName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号码",prop:"phone"}},[a("el-input",{staticClass:"input-300",attrs:{placeholder:"请输入手机号",type:"tel",maxlength:"11",clearable:""},model:{value:e.baseInfo.phone,callback:function(t){e.$set(e.baseInfo,"phone",t)},expression:"baseInfo.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系地址",prop:"address"}},[a("el-input",{staticStyle:{width:"600px"},attrs:{placeholder:"请输入联系地址",type:"text",maxlength:"256",clearable:""},model:{value:e.baseInfo.address,callback:function(t){e.$set(e.baseInfo,"address",t)},expression:"baseInfo.address"}})],1),e._v(" "),a("el-button",{attrs:{disabled:""===e.baseInfo.linkUserId,type:"primary"},on:{click:e.handleBaseInfo}},[e._v("保存")])],1),e._v(" "),a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":"1",mode:"horizontal"}},[a("el-menu-item",{attrs:{index:"1"}},[e._v("账号信息")])],1),e._v(" "),a("el-form",{staticStyle:{"margin-top":"20px"},attrs:{model:e.baseInfo,"label-width":"120px","label-position":"left"}},[a("el-form-item",{attrs:{label:"代理商账号"}},[a("el-input",{staticClass:"input-300",staticStyle:{width:"500px"},attrs:{placeholder:"请输入代理商账号",maxlength:"11",disabled:""},model:{value:e.baseInfo.loginPhone,callback:function(t){e.$set(e.baseInfo,"loginPhone",t)},expression:"baseInfo.loginPhone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"关联商家"}},[a("el-input",{staticClass:"input-300",staticStyle:{width:"500px"},attrs:{placeholder:"请输入关联商家账号",maxlength:"32",disabled:""},model:{value:e.linkName,callback:function(t){e.linkName=t},expression:"linkName"}}),e._v(" "),a("span",{staticClass:"input-anno"},[e._v("如需更改，请输入新的手机号码重新进行绑定验证")])],1)],1)],1)},[],!1,null,null,null);o.options.__file="EditAgent.vue";t.default=o.exports},xBhl:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"c",function(){return r}),a.d(t,"e",function(){return l}),a.d(t,"b",function(){return o}),a.d(t,"d",function(){return i});var n=a("t3Un");function s(e){return Object(n.a)({url:"/agentManage/queryAgents",method:"get",params:e})}function r(e){return Object(n.a)({url:"/agentManage/sendCode",method:"get",params:e})}function l(e){return Object(n.a)({url:"/agentManage/addOrUpdateAgent",method:"post",data:e})}function o(e){return Object(n.a)({url:"/agentManage/getAgent",method:"get",params:e})}function i(e){return Object(n.a)({url:"/agentManage/getMerchant",method:"get",params:e})}}}]);