(window.webpackJsonp=window.webpackJsonp||[]).push([["zZdu"],{zZdu:function(e,a,t){"use strict";t.r(a);var r=t("14Xm"),n=t.n(r),o=t("D3Ub"),s=t.n(o),i=t("KpQh"),c=t("gO3j"),d={components:{"order-list":i.default},data:function(){return{commProps:{cell:{name:["交易设备","投币金额(元)","商户账号","商户姓名","创建时间"],prop:["device","coins","account","name","time"],list:[]},handler:{isShow:!1},pagination:{totalCount:0,pageIndex:1,pageSizes:[10,20,50],pageSize:10,sizeChangeHd:"size-change",currentChangeHd:"current-change"},summary:{showFlag:!0,total:0}},searchParam:{deviceNo:"",adOrgId:"",date:""},merchantList:[],option:{disabledDate:function(e){var a=Date.now(),t=e.getTime();return t<a-2592e6||t>a}}}},mounted:function(){var e=this;return s()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.merchantList=[],a.next=3,Object(c.a)();case 3:e.merchantList=a.sent;case 5:case"end":return a.stop()}},a,e)}))()},methods:{sizeChangeHd:function(e){this.commProps.pagination.pageSize=e,this.queryCoinOrderList()},currentChangeHd:function(e){this.commProps.pagination.pageIndex=e,this.queryCoinOrderList()},queryCoinOrderList:function(){if(""===this.searchParam.adOrgId&&""===this.searchParam.deviceNo)return this.$message({message:"请输入商户账号或设备编号进行查询",type:"error"}),!1;this.getList()},getList:function(){var e=this;return s()(n.a.mark(function a(){var t,r,o,s,i,d;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return(t=e.searchParam).pageIndex=e.commProps.pagination.pageIndex,t.pageSize=e.commProps.pagination.pageSize,t.date&&(t.date=e.searchParam.date+" 00:00:00"),a.next=6,Object(c.c)(t,"coin");case 6:if(0!==(r=a.sent).result){a.next=22;break}if(null!==(o=r.data)){a.next=11;break}return a.abrupt("return");case 11:if(null!==(s=o.pagination)){a.next=14;break}return a.abrupt("return");case 14:e.commProps.summary.total=o.totalCoins,e.commProps.summary.showFlag=!0,e.commProps.pagination.totalCount=s.totalCount,e.commProps.pagination.pageIndex=s.page,e.commProps.cell.list=[],i=s.items||[],d=0,i.forEach(function(a){var t=a.groupNumber;a.device=t?t+"号机-"+a.deviceType+a.deviceNo+"-"+a.groupName:""+a.deviceType+a.deviceNo+"-"+a.groupName,a.curIndex=d,e.commProps.cell.list.push(a),d++});case 22:case 23:case"end":return a.stop()}},a,e)}))()},download:function(){var e=this.searchParam;if(""===this.searchParam.adOrgId&&""===this.searchParam.deviceNo)return this.$message({message:"请输入商户账号或设备编号进行导出",type:"error"}),!1;this.searchParam.date&&(e.date=this.searchParam.date+" 00:00:00"),location.href=encodeURI("/export/coinOrders?"+e)}}},l=t("KHd+"),m=Object(l.a)(d,function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-container",[t("el-header",{staticStyle:{"margin-top":"10px"}},[e._v("\n    商户账号\n    "),t("el-select",{attrs:{filterable:"",placeholder:"请选择",clearable:""},model:{value:e.searchParam.adOrgId,callback:function(a){e.$set(e.searchParam,"adOrgId",a)},expression:"searchParam.adOrgId"}},e._l(e.merchantList,function(e){return t("el-option",{key:e.adOrgId,attrs:{label:e.label,value:e.adOrgId}})})),e._v("设备编号\n    "),t("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入设备编号"},model:{value:e.searchParam.deviceNo,callback:function(a){e.$set(e.searchParam,"deviceNo",a)},expression:"searchParam.deviceNo"}}),e._v("时间\n    "),t("el-date-picker",{attrs:{"picker-options":e.option,type:"date",placeholder:"请选择","value-format":"yyyy-MM-dd"},model:{value:e.searchParam.date,callback:function(a){e.$set(e.searchParam,"date",a)},expression:"searchParam.date"}}),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.queryCoinOrderList}},[e._v("查询")]),e._v(" "),t("el-button",{attrs:{type:"success"},on:{click:e.download}},[e._v("导出")])],1),e._v(" "),t("order-list",{attrs:{cell:e.commProps.cell,summary:e.commProps.summary,pagination:e.commProps.pagination},on:{"current-change":e.currentChangeHd,"size-change":e.sizeChangeHd}})],1)},[],!1,null,null,null);m.options.__file="coinOrderList.vue";a.default=m.exports}}]);