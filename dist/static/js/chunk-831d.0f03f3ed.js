(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-831d"],{"mG/D":function(e,t,a){"use strict";a.d(t,"c",function(){return i}),a.d(t,"d",function(){return n}),a.d(t,"b",function(){return l}),a.d(t,"a",function(){return u}),a.d(t,"e",function(){return r});var i=[{value:"CDZ",label:"充电桩"},{value:"SHJ",label:"售货机"}],n={CDZ:"充电桩",SHJ:"售货机"},l={0:"无",1:"脉冲",2:"串口"},u=[{name:"商场",value:"Mall_Aisle"},{name:"电影院",value:"Cinema"},{name:"KTV",value:"KTV"},{name:"游艺厅",value:"Games_Hall"},{name:"酒店",value:"MALL,002"},{name:"步行街",value:"MALL,004"},{name:"4S店",value:"MALL,003"},{name:"旅游景点",value:"SCENIC_SPOT,001"},{name:"机场",value:"STATION,001"},{name:"火车站",value:"STATION,002"},{name:"汽车站",value:"STATION,003"},{name:"地铁站",value:"STATION,004"},{name:"工厂",value:"FACTORY,001"},{name:"社区",value:"COMMUNITY,001"},{name:"办公楼",value:"OFFICE,001"},{name:"医院",value:"HOSPITAL,001"},{name:"政府机构",value:"GOVERNMENT,001"},{name:"大学",value:"SCHOOL,005"},{name:"初中",value:"SCHOOL,003"},{name:"小学",value:"SCHOOL,002"},{name:"幼儿园",value:"SCHOOL,001"},{name:"培训机构",value:"SCHOOL,006"},{name:"高中&职业技术学院",value:"SCHOOL,004"},{name:"其他",value:"OTHERS,001"}],r=[{value:3,label:"自动售货机"},{value:1,label:"福袋机"},{value:2,label:"口红机"},{value:4,label:"冰淇淋机"},{value:8,label:"电子烟售货机"},{value:11,label:"豆浆机"},{value:12,label:"咖啡机"},{value:13,label:"格子机"}]},zQBQ:function(e,t,a){"use strict";a.r(t);var i=a("qpgI"),n=a("mG/D"),l={data:function(){return{check:-1,queryParams:{equipmentType:"CDZ",equipmentValue:"",registered:1},list:[],deviceMapInfo:n.c,colums:[{key:"value",label:"设备编号"},{key:"loginFlag",label:"登录表示"},{key:"equipmentTypeText",label:"设备类型"},{key:"protocolDTOTitle",label:"设备型号"},{key:"communicationText",label:"通信方式"},{key:"chargePattern",label:"计费方式"},{key:"equipmentParam",label:"设备参数"},{key:"groupNumber",label:"机台号"},{key:"signalText",label:"信号"},{key:"onlineText",label:"在线状态"},{key:"statusText",label:"禁用状态"},{key:"account",label:"账号"},{key:"distributor",label:"商家名称"},{key:"area",label:"区域"},{key:"registerDate",label:"注册时间"}],pageInfo:{total:0,pageSize:10,currPage:1},selectItems:[],equipmentTypesArr:n.c,tableHeight:700}},created:function(){this.initTableHeight(),this.queryList()},methods:{initTableHeight:function(){var e=this;this.$nextTick(function(){var t=document.querySelector(".main-container").offsetHeight,a=document.querySelector(".el-form").offsetHeight;e.tableHeight=t>0?t-a-180:700})},changeDeviceType:function(e){this.queryParams.equipmentType=e,this.queryList()},getChargePatternText:function(e){var t={TIME:"按时长计费",ELEC:"按电量计费"},a="";return(e=e||[]).forEach(function(e){a+=t[e.name]+","}),""!==a&&(a=a.substr(0,a.length-1)),a},queryList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.selectItems=[],this.list=[],this.pageInfo.currPage=t;var a={pageSize:this.pageInfo.pageSize,pageIndex:this.pageInfo.currPage};for(var l in this.queryParams)a[l]=this.queryParams[l];Object(i.r)(a).then(function(t){if(e.listLoading=!1,t.data){var a=t.data.items||[];a=a.map(function(t){t.sourceText=1===t.source?"商家解绑":0===t.source?"平台导入":"";var a=t.protocolDTO&&t.protocolDTO.title||"";t.protocolDTOTitle=a;t.communicationText={0:"无",1:"脉冲",2:"串口"}[t.communication],2!==t.communication?t.chargePattern="--":(t.chargePattern=e.getChargePatternText(t.billingModel),t.billing=t.billingModel[0].name);var i=n.d;t.equipmentTypeText=i[t.equipmentType];t.onlineText={0:"不在线",1:"在线"}[t.online];t.statusText={disabled:"禁用","1Normal":"启用"}[t.status];return t.signalText={1:"弱",2:"中",3:"强",4:"很强"}[t.signal]||"中",t.groupNumber=t.groupNumber?t.groupNumber+"号机":"未设置",t}),e.list=a,e.pageInfo.total=t.data.total||0}else e.pageInfo.total=0})},getTemplateRow:function(e){this.check=e,this.selectItems=[this.list[e]]},handleSizeChange:function(e){this.pageInfo.pageSize=e,this.pageInfo.total=0,this.queryList(1)},handleCurrentChange:function(e){this.queryList(e)},filerQueryList:function(){this.pageInfo.total=0,this.queryList(this.pageInfo.currPage)},handlePage:function(e){if(1===this.selectItems.length){var t=this.selectItems[0];if(1===e){if(0===t.online)return void this.$message({message:"设备离线",type:"error"});if(1===this.selectItems[0].isLyyOpen)return void this.$router.push({path:"/deviceParamsLyyOpen",query:{uniqueCode:t.uniqueCode,name:t.distributor,lyyEquipmentId:this.selectItems[0].lyyEquipmentId,phoneNumber:t.account}});if(this.selectItems[0].interfaceFlag)this.$router.push({path:"/deviceParamsTy",query:{uniqueCode:t.uniqueCode,loginFlag:t.loginFlag,name:t.distributor,lyyEquipmentId:this.selectItems[0].lyyEquipmentId,phoneNumber:t.account}});else{var a={value:t.value,typeValue:t.equipmentType,equipmentTypeName:t.equipmentTypeName,name:t.distributor,phoneNumber:t.account,lyyEquipmentId:this.selectItems[0].lyyEquipmentId};5===t.loginFlag||7===t.loginFlag||14===t.loginFlag||16===t.loginFlag?this.$router.push({path:"/deviceParamsDBJ",query:a}):/^(AMY)|(AMD)|(ZLJ)|(XYJ)|(CDZ)$/.test(t.equipmentType)?this.$router.push({path:"/deviceLifeParams",query:a}):this.$router.push({path:"/deviceParamsOthers",query:a})}}else if(2===e){if(0===t.online&&4!==e)return void this.$message({message:"设备离线",type:"error"});this.$router.push({path:"/deviceServiceEdit",query:{value:this.selectItems[0].value,lyyEquipmentId:this.selectItems[0].lyyEquipmentId,equipmentType:this.queryParams.equipmentType,communication:this.selectItems[0].communication,name:t.distributor,phoneNumber:t.account,billing:t.billing}})}else if(3===e)this.$router.push({path:"/unregister",query:{lyyEquipmentId:this.selectItems[0].lyyEquipmentId,value:this.selectItems[0].value,equipmentType:this.queryParams.equipmentType,name:t.distributor,phoneNumber:t.account}});else if(4===e){if(!this.selectItems[0].communicationText)return;if(!(["CDZ","XYJ"].indexOf(this.selectItems[0].equipmentType)>-1))return void this.$message({message:"请选择充电桩,洗衣机设备",type:"warning"});1e4===this.selectItems[0].loginFlag?this.$router.push({path:"/deviceModify",query:{lyyEquipmentId:this.selectItems[0].lyyEquipmentId,value:this.selectItems[0].value,equipmentType:this.queryParams.equipmentType,name:t.distributor,phoneNumber:t.account,type:1}}):this.$message({message:"请选择设备型号不为空的设备",type:"warning"})}}else this.selectItems.length,this.$message({message:"请选择设备",type:"error"})}}},u=a("KHd+"),r=Object(u.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-area"},[a("el-form",{staticStyle:{"margin-bottom":"20px"},attrs:{inline:!0,"label-width":"90px","label-position":"right"}},[a("el-form-item",{attrs:{label:"设备类型"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.changeDeviceType},model:{value:e.queryParams.equipmentType,callback:function(t){e.$set(e.queryParams,"equipmentType",t)},expression:"queryParams.equipmentType"}},e._l(e.equipmentTypesArr,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"设备编号"}},[a("el-input",{staticClass:"input-300",attrs:{placeholder:"输入设备编号",maxlength:"100",clearable:""},model:{value:e.queryParams.equipmentValue,callback:function(t){e.$set(e.queryParams,"equipmentValue",t)},expression:"queryParams.equipmentValue"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.filerQueryList}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handlePage(1)}}},[e._v("设备参数设置")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handlePage(2)}}},[e._v("设备服务套餐")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handlePage(3)}}},[e._v("解绑设备")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handlePage(4)}}},[e._v("修改设备型号")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{height:e.tableHeight,data:e.list,border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"操作",width:"55",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.$index},nativeOn:{change:function(a){e.getTemplateRow(t.$index)}},model:{value:e.check,callback:function(t){e.check=t},expression:"check"}},[e._v(" \n        ")])]}}])}),e._v(" "),e._l(e.colums,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.key,label:e.label,width:e.width,sortable:e.sortable,align:"center"}})})],2),e._v(" "),a("div",{staticStyle:{"padding-bottom":"10px","font-size":"16px"}},[e._v("合计设备数："+e._s(e.pageInfo.total)+"台")]),e._v(" "),a("el-pagination",{attrs:{"page-sizes":[10,20,30,40],"page-size":e.pageInfo.pageSize,total:e.pageInfo.total,"current-page":e.pageInfo.currPage,background:"",layout:"total, prev, pager, next, sizes, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},[],!1,null,null,null);r.options.__file="deviceRegister.vue";t.default=r.exports}}]);