(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3daa","YKrQ"],{"2awh":function(e,t,a){"use strict";a.r(t);var s=a("14Xm"),l=a.n(s),n=a("D3Ub"),r=a.n(n),i=a("qpgI"),u={name:"ParamC",components:{verfyCode:a("YKrQ").default},data:function(){return{params:{},list:[],index:"",dataInfo:{},modalData:{pulseWidth:"",pulseInterval:""},type:"1",flag:!1,saveData:{pulseWidth:"",pulseInterval:"",battery:""},verfyCodeVisible:!1,phoneNumber:"",name:"",lyyEquipmentId:""}},watch:{index:function(e){var t=this.list[e];"自定义"===t.pulsePatternName?(this.flag=!0,this.saveData.pulseWidth="",this.saveData.pulseInterval="",this.modalData={pulseWidth:"",pulseInterval:""}):(this.saveData.pulseWidth=t.pulseWidth,this.saveData.pulseInterval=t.pulseInterval,this.modalData.pulseWidth=t.pulseWidth,this.modalData.pulseInterval=t.pulseInterval,this.flag=!1)}},created:function(){this.params=this.$route.query,this.phoneNumber=this.$route.query.phoneNumber,this.lyyEquipmentId=this.$route.query.lyyEquipmentId,this.name=this.$route.query.name,this.query()},methods:{saveTemp:function(){this.modalData.pulseWidth<10||this.modalData.pulseWidth>1e3?this.$message({message:"脉冲宽度为10~1000整数",type:"error"}):this.modalData.pulseInterval<10||this.modalData.pulseInterval>1e3?this.$message({message:'"脉冲间隔为10~1000整数',type:"error"}):(this.saveData.pulseWidth=this.modalData.pulseWidth,this.saveData.pulseInterval=this.modalData.pulseInterval)},query:function(){var e=this;return r()(l.a.mark(function t(){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={value:e.params.value,data:1,t:Date.now()},t.next=3,Object(i.e)(a);case 3:1===t.sent.result?setTimeout(function(){e.getEquipmentParamDef()},2500):e.$message({message:"参数读取失败,不能设置",type:"error"});case 5:case"end":return t.stop()}},t,e)}))()},getEquipmentParamDef:function(){var e=this;return r()(l.a.mark(function t(){var a,s,n,r;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={typeValue:e.params.typeValue,value:e.params.value,t:Date.now()},s={equipmentId:e.params.value},t.next=4,Object(i.g)(s);case 4:return n=t.sent,t.next=7,Object(i.m)(a);case 7:1===(r=t.sent).result&&(e.dataInfo=r.para,e.$nextTick(function(){e.saveData.pulseWidth=e.dataInfo.pulseWidth1,e.saveData.pulseInterval=e.dataInfo.pulseInterval1,e.saveData.battery=e.dataInfo.battery})),0===n.result&&(e.list=(n.data||[]).concat([{pulsePatternName:"自定义"}]),e.list.forEach(function(t,a){t.pulsePatternName!==e.dataInfo.pulsePatternName||(e.index=a)}),e.index===e.list.length-1&&(e.modalData.pulseWidth=e.dataInfo.pulseWidth,e.modalData.pulseInterval=e.dataInfo.pulseInterval,setTimeout(function(){e.saveData.pulseWidth=e.dataInfo.pulseWidth1,e.saveData.pulseInterval=e.dataInfo.pulseInterval1,e.saveData.battery=e.dataInfo.battery},500))),e.$nextTick(function(){"自定义"===r.para.pulsePatternName&&(e.modalData.pulseWidth=e.dataInfo.pulseWidth1,e.modalData.pulseInterval=e.dataInfo.pulseInterval1)});case 11:case"end":return t.stop()}},t,e)}))()},saveNewEquipmentBefore:function(){this.index===this.list.length-1&&(this.saveData.pulseWidth=this.modalData.pulseWidth,this.saveData.pulseInterval=this.modalData.pulseInterval),this.saveData.pulseWidth&&this.saveData.pulseInterval?this.modalData.pulseWidth<10||this.modalData.pulseWidth>1e3?this.$message({message:"脉冲宽度为10~1000整数",type:"error"}):this.modalData.pulseInterval<10||this.modalData.pulseInterval>1e3?this.$message({message:'"脉冲间隔为10~1000整数',type:"error"}):this.verfyCodeVisible=!0:this.$message({message:"脉冲设置或脉冲间隔不能为空",type:"error"})},saveNewEquipment:function(){var e=this;return r()(l.a.mark(function t(){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.index===e.list.length-1&&(e.saveData.pulseWidth=e.modalData.pulseWidth,e.saveData.pulseInterval=e.modalData.pulseInterval),e.saveData.pulseWidth&&e.saveData.pulseInterval){t.next=4;break}return e.$message({message:"脉冲设置或脉冲间隔不能为空",type:"error"}),t.abrupt("return");case 4:if(!(e.modalData.pulseWidth<10||e.modalData.pulseWidth>1e3)){t.next=7;break}return e.$message({message:"脉冲宽度为10~1000整数",type:"error"}),t.abrupt("return");case 7:if(!(e.modalData.pulseInterval<10||e.modalData.pulseInterval>1e3)){t.next=10;break}return e.$message({message:'"脉冲间隔为10~1000整数',type:"error"}),t.abrupt("return");case 10:return a={value:e.params.value,pulseWidth1:e.saveData.pulseWidth,pulseInterval1:e.saveData.pulseInterval,battery:e.saveData.battery,pulseWidth2:0,pulseInterval2:0,gift:0,drag:0,interfaceType:0,interfaceBaudRate:0,noteTypes:0,lyyEquipmentId:e.lyyEquipmentId},t.next=13,Object(i.s)(a);case 13:1===t.sent.result&&(e.verfyCodeVisible=!1,e.$message({message:"设置成功",type:"success"}));case 15:case"end":return t.stop()}},t,e)}))()},goBack:function(){window.history.go(-1)}}},o=a("KHd+"),p=Object(o.a)(u,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{margin:"40px"}},[a("div",{staticStyle:{"margin-bottom":"20px","font-size":"14px"}},[e._v(e._s(e.params.equipmentTypeName)+": "+e._s(e.params.value)),a("span",{staticStyle:{color:"#888","margin-left":"10px"}},[e._v("(脉冲宽度 / 间隔范围为10-1000)")])]),e._v(" "),a("el-form",[a("el-form-item",{attrs:{label:"脉冲设置"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.index,callback:function(t){e.index=t},expression:"index"}},e._l(e.list,function(e,t){return a("el-option",{key:e.value,attrs:{label:e.pulsePatternName,value:t}})}))],1),e._v(" "),a("p",{staticStyle:{"font-size":"14px",color:"#888","margin-top":"20px","margin-bottom":"20px"}},[e._v(" 脉冲设置： 脉冲宽度"+e._s(e.saveData.pulseWidth)+", 脉冲间隔 "+e._s(e.saveData.pulseInterval)+" ")]),e._v(" "),e.flag?a("div",[a("el-form-item",{attrs:{label:"脉冲宽度"}},[a("el-input",{staticClass:"input-300",attrs:{placeholder:"请输入10~1000之间整数",type:"number",maxlength:"4",clearable:""},model:{value:e.modalData.pulseWidth,callback:function(t){e.$set(e.modalData,"pulseWidth",t)},expression:"modalData.pulseWidth"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"脉冲间隔"}},[a("el-input",{staticClass:"input-300",attrs:{placeholder:"请输入10~1000之间整数",type:"number",maxlength:"4",clearable:""},model:{value:e.modalData.pulseInterval,callback:function(t){e.$set(e.modalData,"pulseInterval",t)},expression:"modalData.pulseInterval"}})],1)],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"待机电平"}},[a("el-radio",{attrs:{label:"0"},model:{value:e.saveData.battery,callback:function(t){e.$set(e.saveData,"battery",t)},expression:"saveData.battery"}},[e._v("常开")]),e._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:e.saveData.battery,callback:function(t){e.$set(e.saveData,"battery",t)},expression:"saveData.battery"}},[e._v("常闭")])],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"left","margin-top":"80px"}},[a("el-button",{on:{click:e.goBack}},[e._v("返回上一页")]),e._v(" "),a("el-button",{on:{click:e.query}},[e._v("重新加载页面")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:e.saveNewEquipmentBefore}},[e._v("保存设置")])],1),e._v(" "),a("verfyCode",{attrs:{"phone-number":e.phoneNumber,name:e.name},on:{"on-OK":e.saveNewEquipment},model:{value:e.verfyCodeVisible,callback:function(t){e.verfyCodeVisible=t},expression:"verfyCodeVisible"}})],1)},[],!1,null,null,null);p.options.__file="deviceParamsLife.vue";t.default=p.exports},YKrQ:function(e,t,a){"use strict";a.r(t);var s=a("14Xm"),l=a.n(s),n=a("D3Ub"),r=a.n(n),i=a("qpgI"),u={props:{value:{type:Boolean,default:!1},phoneNumber:{type:String,default:""},name:{type:String,default:""}},data:function(){return{verifyCode:"",disabled:!0}},computed:{info:function(){return this.name+"-"+this.phoneNumber}},methods:{handleSend:function(){var e=this;return r()(l.a.mark(function t(){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.disabled){t.next=2;break}return t.abrupt("return");case 2:return e.disabled=!1,setTimeout(function(){e.disabled=!0},2e3),t.next=6,Object(i.C)({phoneNumber:e.phoneNumber});case 6:a=t.sent,e.disabled=!0,0===a.result?e.$message({message:"获取短信验证码成功",type:"success"}):e.$message({message:"获取短信验证码失败",type:"error"});case 9:case"end":return t.stop()}},t,e)}))()},handleCancel:function(){this.disabled=!0,this.$emit("input",!1)},handleOK:function(){this.verifyCode?this.handlevalidate():this.$message({message:"请输入短信验证码",type:"error"})},handlevalidate:function(){var e=this;return r()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(i.B)({phoneNumber:e.phoneNumber,verifyCode:e.verifyCode});case 2:0===t.sent.result?(e.disabled=!0,e.$emit("on-OK")):e.$message({message:"短信验校验失败",type:"success"});case 4:case"end":return t.stop()}},t,e)}))()}}},o=a("KHd+"),p=Object(o.a)(u,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.value,"close-on-click-modal":!1,title:"操作验证",width:"45%"},on:{"update:visible":function(t){e.value=t}}},[a("el-form",{attrs:{"label-width":"120px","label-position":"right"}},[a("el-form-item",{attrs:{label:"设备所属商家",prop:"description"}},[a("el-input",{staticClass:"input-300",attrs:{placeholder:"请输入菜单名称",maxlength:"6",readonly:""},model:{value:e.info,callback:function(t){e.info=t},expression:"info"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"操作验证码",prop:"price"}},[a("el-input",{staticClass:"input-300",attrs:{type:"tel",clearable:"",maxlength:"6"},model:{value:e.verifyCode,callback:function(t){e.verifyCode=t},expression:"verifyCode"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSend}},[e._v("获取验证码")])],1),e._v(" "),a("p",{staticStyle:{color:"red","margin-left":"120px"}},[e._v("请联系商家获取短信验证码")])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleCancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleOK}},[e._v("确定")])],1)],1)},[],!1,null,null,null);p.options.__file="verfyCode.vue";t.default=p.exports}}]);