(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-662e","YKrQ"],{PWUT:function(e,t,a){"use strict";a.r(t);var s=a("14Xm"),r=a.n(s),n=a("D3Ub"),l=a.n(n),i=a("qpgI"),u={name:"DBJ",components:{verfyCode:a("YKrQ").default},data:function(){return{params:{},dataInfo:{},saveData:{pulseWidth:"",pulseInterval:"",battery:""},verfyCodeVisible:!1,phoneNumber:"",name:"",lyyEquipmentId:""}},created:function(){this.params=this.$route.query,this.phoneNumber=this.$route.query.phoneNumber,this.lyyEquipmentId=this.$route.query.lyyEquipmentId,this.name=this.$route.query.name,this.query()},methods:{query:function(){var e=this;return l()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={value:e.params.value,data:1},t.next=3,Object(i.e)(a);case 3:1===t.sent.result?e.getEquipmentParamDef():e.$message({message:"参数读取失败,不能设置",type:"error"});case 5:case"end":return t.stop()}},t,e)}))()},getEquipmentParamDef:function(){var e=this;return l()(r.a.mark(function t(){var a,s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={typeValue:e.params.typeValue,value:e.params.value},t.next=3,Object(i.p)(a);case 3:1===(s=t.sent).result&&(e.dataInfo=s.para,e.saveData.pulseWidth=e.dataInfo.pulseWidth1,e.saveData.pulseInterval=e.dataInfo.pulseInterval1,e.saveData.battery=e.dataInfo.battery);case 5:case"end":return t.stop()}},t,e)}))()},saveNewEquipmentBefore:function(){this.saveData.pulseWidth<10||this.saveData.pulseWidth>1e3?this.$message({message:"脉冲宽度为10~1000整数",type:"error"}):this.saveData.pulseInterval<10||this.saveData.pulseInterval>1e3?this.$message({message:'"脉冲间隔为10~1000整数',type:"error"}):this.verfyCodeVisible=!0},saveNewEquipment:function(){var e=this;return l()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.saveData.pulseWidth<10||e.saveData.pulseWidth>1e3)){t.next=3;break}return e.$message({message:"脉冲宽度为10~1000整数",type:"error"}),t.abrupt("return");case 3:if(!(e.saveData.pulseInterval<10||e.saveData.pulseInterval>1e3)){t.next=6;break}return e.$message({message:'"脉冲间隔为10~1000整数',type:"error"}),t.abrupt("return");case 6:return a={value:e.params.value,pulseWidth1:e.saveData.pulseWidth,pulseInterval1:e.saveData.pulseInterval,battery:e.saveData.battery,pulseWidth2:0,pulseInterval2:0,gift:0,drag:0,interfaceType:0,interfaceBaudRate:0,noteTypes:0,lyyEquipmentId:e.lyyEquipmentId},t.next=9,Object(i.v)(a);case 9:1===t.sent.result&&(e.verfyCodeVisible=!1,e.$message({message:"设置成功",type:"success"}),setTimeout(function(){e.query()},1500));case 11:case"end":return t.stop()}},t,e)}))()}}},o=a("KHd+"),p=Object(o.a)(u,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{margin:"40px"}},[a("div",{staticStyle:{"margin-bottom":"20px","font-size":"14px"}},[e._v(e._s(e.params.equipmentTypeName)+": "+e._s(e.params.value))]),e._v(" "),a("el-form",[a("div",[a("el-form-item",{attrs:{label:"脉冲宽度"}},[a("el-input",{staticClass:"input-300",attrs:{placeholder:"请输入10~1000之间整数",type:"number",maxlength:"4",clearable:""},model:{value:e.saveData.pulseWidth,callback:function(t){e.$set(e.saveData,"pulseWidth",t)},expression:"saveData.pulseWidth"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"脉冲间隔"}},[a("el-input",{staticClass:"input-300",attrs:{placeholder:"请输入10~1000之间整数",type:"number",maxlength:"4",clearable:""},model:{value:e.saveData.pulseInterval,callback:function(t){e.$set(e.saveData,"pulseInterval",t)},expression:"saveData.pulseInterval"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"待机电平"}},[a("el-radio",{attrs:{label:"0"},model:{value:e.saveData.battery,callback:function(t){e.$set(e.saveData,"battery",t)},expression:"saveData.battery"}},[e._v("常开")]),e._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:e.saveData.battery,callback:function(t){e.$set(e.saveData,"battery",t)},expression:"saveData.battery"}},[e._v("常闭")])],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"left","margin-top":"80px"}},[a("el-button",{on:{click:e.query}},[e._v("重新加载")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"100px"},attrs:{type:"primary"},on:{click:e.saveNewEquipmentBefore}},[e._v("保存设置")])],1),e._v(" "),a("verfyCode",{attrs:{"phone-number":e.phoneNumber,name:e.name},on:{"on-OK":e.saveNewEquipment},model:{value:e.verfyCodeVisible,callback:function(t){e.verfyCodeVisible=t},expression:"verfyCodeVisible"}})],1)},[],!1,null,null,null);p.options.__file="deviceParamsOthers.vue";t.default=p.exports},YKrQ:function(e,t,a){"use strict";a.r(t);var s=a("14Xm"),r=a.n(s),n=a("D3Ub"),l=a.n(n),i=a("qpgI"),u={props:{value:{type:Boolean,default:!1},phoneNumber:{type:String,default:""},name:{type:String,default:""}},data:function(){return{verifyCode:"",disabled:!0}},computed:{info:function(){return this.name+"-"+this.phoneNumber}},methods:{handleSend:function(){var e=this;return l()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.disabled){t.next=2;break}return t.abrupt("return");case 2:return e.disabled=!1,setTimeout(function(){e.disabled=!0},2e3),t.next=6,Object(i.F)({phoneNumber:e.phoneNumber});case 6:a=t.sent,e.disabled=!0,0===a.result?e.$message({message:"获取短信验证码成功",type:"success"}):e.$message({message:"获取短信验证码失败",type:"error"});case 9:case"end":return t.stop()}},t,e)}))()},handleCancel:function(){this.disabled=!0,this.$emit("input",!1)},handleOK:function(){this.verifyCode?this.handlevalidate():this.$message({message:"请输入短信验证码",type:"error"})},handlevalidate:function(){var e=this;return l()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(i.E)({phoneNumber:e.phoneNumber,verifyCode:e.verifyCode});case 2:0===t.sent.result?(e.disabled=!0,e.$emit("on-OK")):e.$message({message:"短信验校验失败",type:"success"});case 4:case"end":return t.stop()}},t,e)}))()}}},o=a("KHd+"),p=Object(o.a)(u,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.value,"close-on-click-modal":!1,title:"操作验证",width:"45%"},on:{"update:visible":function(t){e.value=t}}},[a("el-form",{attrs:{"label-width":"120px","label-position":"right"}},[a("el-form-item",{attrs:{label:"设备所属商家",prop:"description"}},[a("el-input",{staticClass:"input-300",attrs:{placeholder:"请输入菜单名称",maxlength:"6",readonly:""},model:{value:e.info,callback:function(t){e.info=t},expression:"info"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"操作验证码",prop:"price"}},[a("el-input",{staticClass:"input-300",attrs:{type:"tel",clearable:"",maxlength:"6"},model:{value:e.verifyCode,callback:function(t){e.verifyCode=t},expression:"verifyCode"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSend}},[e._v("获取验证码")])],1),e._v(" "),a("p",{staticStyle:{color:"red","margin-left":"120px"}},[e._v("请联系商家获取短信验证码")])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleCancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleOK}},[e._v("确定")])],1)],1)},[],!1,null,null,null);p.options.__file="verfyCode.vue";t.default=p.exports}}]);